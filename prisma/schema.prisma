generator client {
  provider = "prisma-client-js"
}

generator json {
  provider  = "prisma-json-types-generator"
  namespace = "PrismaJson"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Album {
  id          String   @id
  title       String
  description String
  release     DateTime
  colors      String[]
  musics      Music[]
  isMini      Boolean
}

enum CategoryType {
  PROGRAM
  REALITY
  OTHERS
}

enum CategoryOptions {
  MEMBERS
  EPISODE
}

model Category {
  id          String            @id
  title       String
  description String?
  type        CategoryType
  order       Int
  videos      Video[]
  options     CategoryOptions[]
}

enum VideoSource {
  YOUTUBE
}

model Video {
  id         String      @id
  title      String
  source     VideoSource
  sourceId   String
  date       DateTime
  categories Category[]

  /// [VideoMeta]
  meta Json[]

  session   Session? @relation(fields: [sessionId], references: [id], onDelete: SetNull)
  sessionId String?
}

model Music {
  id         String         @id
  title      String
  shortTitle String
  order      Int
  albumId    String?
  album      Album?         @relation(fields: [albumId], references: [id])
  playData   MusicPlayData?

  isPerformed Boolean
  isTitle     Boolean
  isMixable   Boolean

  anchor   Float?
  duration Float?

  sessions Session[]
}

model MusicPlayData {
  musicId   String @id
  music     Music  @relation(fields: [musicId], references: [id])
  youtubeId String
  lyrics    Json?
}

enum ScheduleType {
  ALBUM
  PROGRAM
  FANSIGN
  CONCERT
  RADIO
  OTHERS
}

model Schedule {
  id          String       @id
  title       String
  date        DateTime
  dateDetails String?
  type        ScheduleType
  members     String[]
  url         String?
  isAllDay    Boolean
}

enum SessionType {
  SHOWCASE
  FANSIGN
  PROGRAM
}

model Session {
  id      String      @id
  type    SessionType
  videos  Video[]
  program String?
  title   String
  date    DateTime
  music   Music?      @relation(fields: [musicId], references: [id])
  musicId String?
}
